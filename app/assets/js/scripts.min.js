/*!
 * pwp7427
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2019. MIT licensed.
 */
!function(){function e(){t===!1&&(t=!0,Munchkin.init("209-INQ-367"))}var t=!1,n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//munchkin.marketo.net/munchkin.js",n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||e()},n.onload=e,document.getElementsByTagName("head")[0].appendChild(n)}(),function(e,t,n,o){"use strict";e(function(){function t(){e(".overlay").removeClass("show"),e("body").removeClass("noscroll")}function n(){var t=e("#modal").find("select, input, textarea, button, a").filter(":visible"),n=t.first(),o=t.last();n.focus(),o.on("keydown",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),n.focus())}),n.on("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),o.focus())}),e(".focus").on("keydown",function(t){9!==t.which&&40!==t.which&&37!==t.which&&38!==t.which&&39!==t.which||e(this).parent("label").addClass("active")})}function o(){if(e("#registerInterest").valid()){var t=e.trim(e("#registerInterest input[name=fName]").val()),n=e.trim(e("#registerInterest input[name=lName]").val()),o=e.trim(e("#registerInterest input[name=regEmail]").val().toLowerCase()),s=e.trim(e("#registerInterest input[name=regMobile]").val()),a=e("#registerInterest input[name='describesYou']:checked").val(),r=e("#registerInterest input[name='qualificationLevel']:checked").val(),i=e.trim(e("#registerInterest input[name=startDate]:checked").val()),l=e.trim(e("#registerInterest span.js-textReplace.no-radio").text()),c=e.trim(e("#registerInterest .secondary-school-student .added-text").text()),u=e("#registerInterest input[name=wantToKnow]:checked").map(function(){return this.value}).get().join("; ");MktoForms2.loadForm("//app-sn01.marketo.com","209-INQ-367",3171),MktoForms2.whenReady(function(m){console.log("myForm = "+m),console.log("Email address = "+o),console.log("First Name = "+t),console.log("Last Name = "+n),console.log("Mobile number = "+s),console.log("Lead Type = "+a),console.log("Commencement Data = "+i),console.log("Interest = "+u),console.log("study area = "+l),console.log("study Level = "+r),console.log("year Level = "+c),m.onSuccess(function(e){return console.log("Form successfully submitted"),console.log("Vals-",e),!1}),m.addHiddenFields({FirstName:t,LastName:n,Email:o,MobilePhone:s,Lead_Type__c:a,Commencement_Date__c:i,interests:u,Study_Area__c:l,Level_of_Study__c:r,disciplineArea:l,Year_Level__c:c}),m.submit(),d===!0&&(e("button[name=update]").html('<span style="display:none" class="loadersmall"></span>Updating details'),e(".loadersmall").css("display","inline-block")),d===!0?setTimeout(function(){e(".overlay").removeClass("show"),e(".register-interest-overlay").css("display: none"),e("body").removeClass("noscroll").delay(500).queue(function(){location.reload()})},3e3):(e(".overlay").removeClass("show"),e(".register-interest-overlay").css("display: none"),e("body").removeClass("noscroll"))})}}var s=e("meta[name=dkncoursetype]").attr("content"),a=e("meta[name=dknpagetitle]").attr("content"),r=e("meta[name=dkncourseaward]").attr("content"),i=e("span.course-name"),l=e("span.enquirer-name"),c=e(".js-next__form"),d=!0,s=(e("form#registerInterest"),"postgraduate");if(""==!s){var u=s.search(/research/i),m=s.search(/undergraduate/i),p=s.search(/postgraduate/i),s="";m>-1?s="undergraduate":u>-1?s="research":p>-1&&(s="postgraduate")}else if(""==!a&&("Undergraduate courses"===a||"Postgraduate courses"===a||"Research degrees"===a)){var u=a.search(/research/i),m=a.search(/undergraduate/i),p=a.search(/postgraduate/i),s="";m>-1?s="undergraduate":u>-1?s="research":p>-1&&(s="postgraduate")}""==!r?i.text("the "+r+" course."):""==!a&&i.text(a),c.on("click",function(){var t=e.trim(e("#registerInterest input[name=firstName]").val());l.text(t+"."),n()}),e("form#registerInterest").validate({rules:{fName:{required:!0,minlength:2},regEmail:{required:!0,email:!0},regMobile:{required:!0,number:!0,minlength:10,maxlength:10},describesYou:{required:!0}},messages:{fName:"Ensure your first name is entered correctly",regEmail:"Please ensure your email is in the correct format. e.g. name@email.com",regMobile:{required:"Check you number for correctness",number:"Phone number must consist of only numbers",minlength:"Phone number must be 10 digits long",maxlength:"Phone number must be 10 digits long"},describesYou:"You must select the one that best describes you"},errorPlacement:function(t,n){"describesYou"==n.attr("name")?e(".section-describesYou legend").append(t):"fName"==n.attr("name")?t.insertAfter(n):"regEmail"==n.attr("name")?t.insertAfter(n):"regMobile"==n.attr("name")?t.insertAfter(n):t.insertAfter(n)}}),e("form#registerInterest .form-section-one input").on("blur click",function(){var t=e(".inputContainer.required input").filter(function(){return""===e(this).val()}).length,n=e("input.error").length,o=e('input:radio[name="describesYou"]:checked').length;0===t&&0===n&&0!=o&&e("button[name=nextForm").removeAttr("disabled")}),e("#registerInterest button[type=submit]").one("click",function(e){e.preventDefault(),d=!0,o(e)});var h=e(".overlay"),f=e("body");e(".navigation__utility-link_Get_more_info").on("click",function(t){e("form#registerInterest");t.preventDefault(),h.addClass("show"),f.addClass("noscroll"),n()}),e('input[type="text"], input[type="tel"]').focus(function(){var t=e(this).val();0==t.length&&e(this).parent().addClass("filled")}),e('input[type="text"], input[type="tel"]').focusout(function(){var t=e(this).val();0==t.length&&e(this).parent().removeClass("filled")}),e("input:radio[name=describesYou], input:radio[name=studyInterest]").on("click",function(){e(this).closest(".fakeDropdown").toggleClass("open filled"),e(this).parent().eq(2).addClass("filled")}),e(".section-describesYou .radioButton:not(.fakeDropdown)").on("click",function(){e(".fakeDropdown").hasClass("open")&&e(".fakeDropdown").removeClass("open filled"),e(".added-text").remove()}),e(".section-describesYou .sub-radio input").on("change",function(){e(".added-text").remove(),e(this).closest(".fakeDropdown").removeClass("open")}),e("input:radio[name=secondary-school]").on("change",function(){var t=e(this).val(),n=e(".secondary-school-student");e(".added-text").html(""),console.log("selected value is = "+t),n.append('<span class="added-text">'+t+"</span>")}),e("input:radio[name=subject]").on("change",function(){var t=e(this).next("span").text(),n=e(".js-textReplace"),o='<span class="js-textReplace no-radio">'+t+'<svg class="icon icon-arrow icon-arrow__background"><use href="#icon-arrow" xlink:href="#icon-arrow"/></svg></span>';n.html(o),e(this).closest(".fakeDropdown").removeClass("open filled")}),e("input:radio").on("click",function(){console.log(e(this).attr("name"));var t=(e("input#secondary-student").attr("id"),e(this).attr("id"));switch(t){case"y12":;break;case"y11":;break;case"y10":;break;case"y9":;break;case"y8":;break;case"y7":;break;case"early":}"secondary-school"==e(this).attr("name")||"secondary-student"==e(this).attr("id")||"subject"==e(this).attr("name")||"studyInterest"==e(this).attr("name")?console.log(e(this).attr("name")+" clicked"):(e(".sub-radio").find(".optionSelected").removeClass("optionSelected"),e(".sub-radio input").prop("checked",!1)),e(this).is(":checked")&&(e("input:radio:not(:checked)").parent().removeClass("optionSelected"),e("input:radio:not(:checked)").parent().eq(2).removeClass("optionSelected"),e(this).parent().addClass("optionSelected")),e(".radioButton.fakeDropdown > div > input[type=radio]").is(":checked")?e(this).closest(".radioButton.fakeDropdown").addClass("optionSelected"):e(".radioButton.fakeDropdown").removeClass("optionSelected")}),e("input:checkbox").on("click",function(){e(this).is(":checked")?e(this).parent().addClass("optionSelected"):e(this).parent().removeClass("optionSelected")}),e("button[name=nextForm]").on("click",function(){e(this).find(".loadersmall").css("display","inline-block").stop().delay(3e3).queue(function(){e(".form-section-one").addClass("fadeOut"),e(".form-section-two").addClass("fadeIn")})}),e(".modalCloseButton").on("click",function(){e("#registerInterest").valid()?(d=!1,o(),e("#registerInterest button[name=update]").html('<span style="display:none" class="loadersmall"></span>Update my details')):(t(),e("label.error").remove())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiaW5pdE11bmNoa2luIiwiZGlkSW5pdCIsIk11bmNoa2luIiwiaW5pdCIsInMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJzcmMiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJ0aGlzIiwicmVhZHlTdGF0ZSIsIm9ubG9hZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCIkIiwid2luZG93IiwidW5kZWZpbmVkIiwiY2xvc2VPdmVybGF5IiwicmVtb3ZlQ2xhc3MiLCJtYWtlQWNjZXNzaWJsZSIsImlucHV0cyIsImZpbmQiLCJmaWx0ZXIiLCJmaXJzdElucHV0IiwiZmlyc3QiLCJsYXN0SW5wdXQiLCJsYXN0IiwiZm9jdXMiLCJvbiIsImUiLCJ3aGljaCIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJwYXJlbnQiLCJhZGRDbGFzcyIsInN1Ym1pdEZvcm0iLCJ2YWxpZCIsImZuYW1lIiwidHJpbSIsInZhbCIsImxuYW1lIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsIm1vYmlsZSIsImlhbWEiLCJzdHVkeUxldmVsIiwic3RhcnRTdHVkeSIsInN0dWR5QXJlYSIsInRleHQiLCJ5ZWFyTGV2ZWwiLCJsaWtlVG9Lbm93IiwibWFwIiwidmFsdWUiLCJnZXQiLCJqb2luIiwiTWt0b0Zvcm1zMiIsImxvYWRGb3JtIiwid2hlblJlYWR5IiwibXlGb3JtIiwiY29uc29sZSIsImxvZyIsIm9uU3VjY2VzcyIsInZhbHMiLCJhZGRIaWRkZW5GaWVsZHMiLCJGaXJzdE5hbWUiLCJMYXN0TmFtZSIsIkVtYWlsIiwiTW9iaWxlUGhvbmUiLCJMZWFkX1R5cGVfX2MiLCJDb21tZW5jZW1lbnRfRGF0ZV9fYyIsImludGVyZXN0cyIsIlN0dWR5X0FyZWFfX2MiLCJMZXZlbF9vZl9TdHVkeV9fYyIsImRpc2NpcGxpbmVBcmVhIiwiWWVhcl9MZXZlbF9fYyIsInN1Ym1pdCIsInJlZnJlc2hlciIsImh0bWwiLCJjc3MiLCJzZXRUaW1lb3V0IiwiZGVsYXkiLCJxdWV1ZSIsImxvY2F0aW9uIiwicmVsb2FkIiwiY291cnNlVHlwZSIsImF0dHIiLCJjb3Vyc2VMYW5kaW5nUGFnZSIsImNvdXJzZU5hbWUiLCJjb3Vyc2VOYW1lQ29udGFpbmVyIiwicGVyc29uTmFtZUNvbnRhaW5lciIsInN1YnNjcmliZUJ1dHRvbiIsInJlc2VhcmNoIiwic2VhcmNoIiwidW5kZXJncmFkIiwicG9zdGdyYWQiLCJ2YWxpZGF0ZSIsInJ1bGVzIiwiZk5hbWUiLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInJlZ0VtYWlsIiwicmVnTW9iaWxlIiwibnVtYmVyIiwibWF4bGVuZ3RoIiwiZGVzY3JpYmVzWW91IiwibWVzc2FnZXMiLCJlcnJvclBsYWNlbWVudCIsImVycm9yIiwiZWxlbWVudCIsImFwcGVuZCIsImluc2VydEFmdGVyIiwiZW1wdHlGaWVsZHMiLCJsZW5ndGgiLCJlcnJvck1zZ3MiLCJyYWRpb2NoZWNrIiwicmVtb3ZlQXR0ciIsIm9uZSIsIm92ZXJsYXkiLCJib2R5IiwiZm9jdXNvdXQiLCJjbG9zZXN0IiwidG9nZ2xlQ2xhc3MiLCJlcSIsImhhc0NsYXNzIiwicmVtb3ZlIiwic2VsZWN0ZWRWYWx1ZSIsInNzcyIsIm5leHQiLCJ0ZXh0UmVwbGFjZUNvbnRhaW5lciIsInRleHRSZXBsYWNlSHRtbCIsIndoaWNoUmFkaW8iLCJwcm9wIiwiaXMiLCJzdG9wIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQUNBLFdBRUEsUUFBQUEsS0FDQUMsS0FBQSxJQUNBQSxHQUFBLEVBQ0FDLFNBQUFDLEtBQUEsZ0JBSkEsR0FBQUYsSUFBQSxFQU9BRyxFQUFBQyxTQUFBQyxjQUFBLFNBQ0FGLEdBQUFHLEtBQUEsa0JBQ0FILEVBQUFJLE9BQUEsRUFDQUosRUFBQUssSUFBQSxxQ0FDQUwsRUFBQU0sbUJBQUEsV0FDQSxZQUFBQyxLQUFBQyxZQUFBLFVBQUFELEtBQUFDLFlBQ0FaLEtBR0FJLEVBQUFTLE9B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QXZILE9BQUFaIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTXVuY2hraW4gZm9yIE1hcmtldG9cbihmdW5jdGlvbigpIHtcbiAgdmFyIGRpZEluaXQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gaW5pdE11bmNoa2luKCkge1xuICAgIGlmKGRpZEluaXQgPT09IGZhbHNlKSB7XG4gICAgICBkaWRJbml0ID0gdHJ1ZTtcbiAgICAgIE11bmNoa2luLmluaXQoXCIyMDktSU5RLTM2N1wiKTtcbiAgICB9XG4gIH1cbiAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgcy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgcy5hc3luYyA9IHRydWU7XG4gIHMuc3JjID0gXCIvL211bmNoa2luLm1hcmtldG8ubmV0L211bmNoa2luLmpzXCI7XG4gIHMub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIgfHwgdGhpcy5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIpIHtcbiAgICAgIGluaXRNdW5jaGtpbigpO1xuICAgIH1cbiAgfTtcbiAgcy5vbmxvYWQgPSBpbml0TXVuY2hraW47XG4gIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQocyk7XG59KSgpO1xuXG5cbihmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gICQoZnVuY3Rpb24gKCkge1xuXG4gIFx0dmFyIGNvdXJzZVR5cGUgPSAkKCdtZXRhW25hbWU9ZGtuY291cnNldHlwZV0nKS5hdHRyKFwiY29udGVudFwiKSxcbiAgXHQgICAgY291cnNlTGFuZGluZ1BhZ2UgPSAkKCdtZXRhW25hbWU9ZGtucGFnZXRpdGxlXScpLmF0dHIoXCJjb250ZW50XCIpLFxuICBcdCAgICBjb3Vyc2VOYW1lID0gJCgnbWV0YVtuYW1lPWRrbmNvdXJzZWF3YXJkXScpLmF0dHIoXCJjb250ZW50XCIpLFxuICBcdCAgICBjb3Vyc2VOYW1lQ29udGFpbmVyID0gJCgnc3Bhbi5jb3Vyc2UtbmFtZScpLFxuICBcdCAgICBwZXJzb25OYW1lQ29udGFpbmVyID0gJCgnc3Bhbi5lbnF1aXJlci1uYW1lJyksXG4gIFx0ICAgIHN1YnNjcmliZUJ1dHRvbiA9ICQoJy5qcy1uZXh0X19mb3JtJyksXG4gIFx0ICAgIHJlZnJlc2hlciA9IHRydWUsXG4gIFx0XHRteUZvcm0gPSAkKCdmb3JtI3JlZ2lzdGVySW50ZXJlc3QnKSxcbiAgXHRcdHN1Ym1pdENvdW50ID0gMDtcblxuICBcdC8vIGNvbnNvbGUubG9nKCdteUZvcm0gPSAnICsgbXlGb3JtKTtcdFxuXG4gIFx0dmFyIGNvdXJzZVR5cGUgPSBcInBvc3RncmFkdWF0ZVwiO1xuICBcdFx0XG4gIFx0XHRpZighY291cnNlVHlwZSA9PSBcIlwiKSB7XG4gIFx0XHQgICAgdmFyIHJlc2VhcmNoID0gY291cnNlVHlwZS5zZWFyY2goL3Jlc2VhcmNoL2kpLFxuICAgICAgXHRcdCAgICB1bmRlcmdyYWQgPSBjb3Vyc2VUeXBlLnNlYXJjaCgvdW5kZXJncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgcG9zdGdyYWQgPSBjb3Vyc2VUeXBlLnNlYXJjaCgvcG9zdGdyYWR1YXRlL2kpLFxuICAgICAgXHRcdCAgICBjb3Vyc2VUeXBlID0gXCJcIjtcbiAgICAgIFx0XHQgICAgXG4gICAgICBcdFx0ICAgIGlmKHVuZGVyZ3JhZCA+IC0xKSB7XG4gICAgICBcdFx0ICAgICAgICBjb3Vyc2VUeXBlID0gXCJ1bmRlcmdyYWR1YXRlXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH0gZWxzZSBpZiAocmVzZWFyY2ggPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwicmVzZWFyY2hcIjtcbiAgICAgIFx0XHQgICAgICAgIC8vIG15Rm9ybS5hZGRDbGFzcyhjb3Vyc2VUeXBlKTtcbiAgICAgIFx0XHQgICAgfSBlbHNlIGlmIChwb3N0Z3JhZCA+IC0xKSB7XG4gICAgICBcdFx0ICAgICAgICBjb3Vyc2VUeXBlID0gXCJwb3N0Z3JhZHVhdGVcIjtcbiAgICAgIFx0XHQgICAgICAgIC8vIG15Rm9ybS5hZGRDbGFzcyhjb3Vyc2VUeXBlKTtcbiAgICAgIFx0XHQgICAgfVxuICBcdFx0fSBlbHNlIGlmKCghY291cnNlTGFuZGluZ1BhZ2UgPT0gXCJcIikgJiYgKChjb3Vyc2VMYW5kaW5nUGFnZSA9PT0gXCJVbmRlcmdyYWR1YXRlIGNvdXJzZXNcIikgfHwgKGNvdXJzZUxhbmRpbmdQYWdlID09PSBcIlBvc3RncmFkdWF0ZSBjb3Vyc2VzXCIpIHx8IChjb3Vyc2VMYW5kaW5nUGFnZSA9PT0gXCJSZXNlYXJjaCBkZWdyZWVzXCIpKSkge1xuICBcdFx0ICAgIHZhciByZXNlYXJjaCA9IGNvdXJzZUxhbmRpbmdQYWdlLnNlYXJjaCgvcmVzZWFyY2gvaSksXG4gICAgICBcdFx0ICAgIHVuZGVyZ3JhZCA9IGNvdXJzZUxhbmRpbmdQYWdlLnNlYXJjaCgvdW5kZXJncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgcG9zdGdyYWQgPSBjb3Vyc2VMYW5kaW5nUGFnZS5zZWFyY2goL3Bvc3RncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgY291cnNlVHlwZSA9IFwiXCI7XG4gICAgICBcdFx0ICAgIFxuICAgICAgXHRcdCAgICBpZih1bmRlcmdyYWQgPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwidW5kZXJncmFkdWF0ZVwiO1xuICAgICAgXHRcdCAgICAgICAgLy8gbXlGb3JtLmFkZENsYXNzKGNvdXJzZVR5cGUpO1xuICAgICAgXHRcdCAgICB9IGVsc2UgaWYgKHJlc2VhcmNoID4gLTEpIHtcbiAgICAgIFx0XHQgICAgICAgIGNvdXJzZVR5cGUgPSBcInJlc2VhcmNoXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH0gZWxzZSBpZiAocG9zdGdyYWQgPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwicG9zdGdyYWR1YXRlXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH1cbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHQgICAgLy8gbXlGb3JtLmFkZENsYXNzKFwiZ2VuZXJpY1wiKTtcbiAgXHRcdH1cbiAgXHRcdFxuICBcdFx0Ly8gRmlsbGluZyBpbiBkeW5hbWljIHRleHQgZm9yIGNvdXJzZSBuYW1lXG4gIFx0XHRpZighY291cnNlTmFtZSA9PSBcIlwiKSB7XG4gIFx0XHQgICAgY291cnNlTmFtZUNvbnRhaW5lci50ZXh0KCd0aGUgJyArIGNvdXJzZU5hbWUgKyAnIGNvdXJzZS4nKTtcbiAgXHRcdH0gZWxzZSBpZighY291cnNlTGFuZGluZ1BhZ2UgPT0gXCJcIikge1xuICBcdFx0ICAgIGNvdXJzZU5hbWVDb250YWluZXIudGV4dChjb3Vyc2VMYW5kaW5nUGFnZSk7XG4gIFx0XHR9XG4gIFx0XHRcbiAgXHRcdC8vIEZpbGxpbmcgaW4gZHluYW1pYyB0ZXh0IGZvciBwZXJzb25zIG5hbWVcbiAgXHRcdHN1YnNjcmliZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0ICAgIHZhciBmbmFtZSA9ICQudHJpbSgkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT1maXJzdE5hbWVdXCIpLnZhbCgpKTtcbiAgXHRcdCAgICBwZXJzb25OYW1lQ29udGFpbmVyLnRleHQoZm5hbWUgKyAnLicpO1xuICBcdFx0ICAgIG1ha2VBY2Nlc3NpYmxlKCk7XG4gIFx0XHR9KTtcblxuICBcdGZ1bmN0aW9uIGNsb3NlT3ZlcmxheSgpIHtcbiAgXHRcdCQoJy5vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcblx0ICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbm9zY3JvbGwnKTtcbiAgXHR9XG5cbiAgXHRmdW5jdGlvbiBtYWtlQWNjZXNzaWJsZSgpIHtcbiAgXHRcdC8vIEtlZXAgVGFiIHdpdGhpbiBNb2RhbFxuXG5cdCAgXHR2YXIgaW5wdXRzID0gJCgnI21vZGFsJykuZmluZCgnc2VsZWN0LCBpbnB1dCwgdGV4dGFyZWEsIGJ1dHRvbiwgYScpLmZpbHRlcignOnZpc2libGUnKTtcblx0ICBcdHZhciBmaXJzdElucHV0ID0gaW5wdXRzLmZpcnN0KCksXG5cdCAgXHRcdGxhc3RJbnB1dCA9IGlucHV0cy5sYXN0KCk7XG5cblx0ICBcdC8vIHNldCBmb2N1cyBvbiBmaXJzdCBpbXB1dFxuXHQgIFx0Zmlyc3RJbnB1dC5mb2N1cygpO1xuXG5cdCAgXHQvLyByZWRpcmVjdCBsYXN0IHRhYiB0byB0aGUgZmlyc3QgaW5wdXRcblx0XHRsYXN0SW5wdXQub24oJ2tleWRvd24nLCBmdW5jdGlvbihlKXtcblx0XHRcdGlmKChlLndoaWNoID09PSA5ICYmICFlLnNoaWZ0S2V5KSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGZpcnN0SW5wdXQuZm9jdXMoKTtcblx0XHRcdH1cdFxuXHRcdH0pO1xuXG5cdFx0Ly8gcmVkaXJlY3QgZmlyc3Qgc2hpZnQrdGFiIHRvIGxhc3QgaW5wdXRcblx0XHRmaXJzdElucHV0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0XHQgICAgaWYgKChlLndoaWNoID09PSA5ICYmIGUuc2hpZnRLZXkpKSB7XG5cdFx0ICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ICAgICAgICBsYXN0SW5wdXQuZm9jdXMoKTtcblx0XHQgICAgfVxuXHRcdH0pO1xuXG5cdFx0JCgnLmZvY3VzJykub24oJ2tleWRvd24nLCBmdW5jdGlvbihlKXtcblx0XHRcdGlmKChlLndoaWNoID09PSA5IHx8IGUud2hpY2ggPT09IDQwIHx8IGUud2hpY2ggPT09IDM3IHx8IGUud2hpY2ggPT09IDM4IHx8IGUud2hpY2ggPT09IDM5ICkpIHtcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0fVxuXHRcdH0pO1xuICBcdH1cbiAgXHRcbiAgXHRmdW5jdGlvbiBzdWJtaXRGb3JtKCkge1xuXG4gIFx0XHQvLyBjb25zb2xlLmxvZyhyZWZyZXNoZXIpO1xuICAgIFx0aWYoKCQoJyNyZWdpc3RlckludGVyZXN0JykpLnZhbGlkKCkpe1xuICAgIFx0XHR2YXIgZm5hbWUgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9Zk5hbWVdXCIpLnZhbCgpKSxcbiAgICBcdFx0XHRsbmFtZSA9ICQudHJpbSgkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT1sTmFtZV1cIikudmFsKCkpLFxuICAgIFx0XHRcdGVtYWlsID0gJC50cmltKCQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPXJlZ0VtYWlsXVwiKS52YWwoKS50b0xvd2VyQ2FzZSgpKSxcbiAgICBcdFx0XHRtb2JpbGUgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9cmVnTW9iaWxlXVwiKS52YWwoKSksXG4gICAgXHRcdFx0aWFtYSA9ICQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPSdkZXNjcmliZXNZb3UnXTpjaGVja2VkXCIpLnZhbCgpLFxuICAgIFx0XHRcdHN0dWR5TGV2ZWwgPSAkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT0ncXVhbGlmaWNhdGlvbkxldmVsJ106Y2hlY2tlZFwiKS52YWwoKSxcbiAgICBcdFx0XHRzdGFydFN0dWR5ID0gJC50cmltKCQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPXN0YXJ0RGF0ZV06Y2hlY2tlZFwiKS52YWwoKSksXG4gICAgXHRcdFx0c3R1ZHlBcmVhID0gJC50cmltKCQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBzcGFuLmpzLXRleHRSZXBsYWNlLm5vLXJhZGlvXCIpLnRleHQoKSksXG4gICAgXHRcdFx0eWVhckxldmVsID0gJC50cmltKCQoXCIjcmVnaXN0ZXJJbnRlcmVzdCAuc2Vjb25kYXJ5LXNjaG9vbC1zdHVkZW50IC5hZGRlZC10ZXh0XCIpLnRleHQoKSksXG4gICAgXHRcdFx0bGlrZVRvS25vdyA9ICQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPXdhbnRUb0tub3ddOmNoZWNrZWRcIikubWFwKGZ1bmN0aW9uKCkge1xuICAgIFx0XHRcdFx0cmV0dXJuIHRoaXMudmFsdWU7XG4gICAgXHRcdFx0fSkuZ2V0KCkuam9pbignOyAnKTtcblxuICAgIFx0XHRNa3RvRm9ybXMyLmxvYWRGb3JtKFwiLy9hcHAtc24wMS5tYXJrZXRvLmNvbVwiLCBcIjIwOS1JTlEtMzY3XCIsIDMxNzEpO1xuXHQgICAgICAgIE1rdG9Gb3JtczIud2hlblJlYWR5KGZ1bmN0aW9uIChteUZvcm0pIHtcbiAgICAgICAgXHRcdGNvbnNvbGUubG9nKCdteUZvcm0gPSAnICsgbXlGb3JtKTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtYWlsIGFkZHJlc3MgPSAnICsgZW1haWwpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnRmlyc3QgTmFtZSA9ICcgKyBmbmFtZSk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMYXN0IE5hbWUgPSAnICsgbG5hbWUpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnTW9iaWxlIG51bWJlciA9ICcgKyBtb2JpbGUpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnTGVhZCBUeXBlID0gJyArIGlhbWEpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tbWVuY2VtZW50IERhdGEgPSAnICsgc3RhcnRTdHVkeSk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnRlcmVzdCA9ICcgKyBsaWtlVG9Lbm93KTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0dWR5IGFyZWEgPSAnICsgc3R1ZHlBcmVhKTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0dWR5IExldmVsID0gJyArIHN0dWR5TGV2ZWwpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygneWVhciBMZXZlbCA9ICcgKyB5ZWFyTGV2ZWwpO1xuXHQgICAgICAgICAgICAgIFxuXHQgICAgICAgICAgICBteUZvcm0ub25TdWNjZXNzKGZ1bmN0aW9uICh2YWxzKSB7XHQgICAgICAgIFxuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Zvcm0gc3VjY2Vzc2Z1bGx5IHN1Ym1pdHRlZCcpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhbHMtJywgdmFscyk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIG15Rm9ybS5hZGRIaWRkZW5GaWVsZHMoe1xuXHQgICAgICAgICAgICAgICAgIFwiRmlyc3ROYW1lXCI6IGZuYW1lLFxuXHQgICAgICAgICAgICAgICAgIFwiTGFzdE5hbWVcIjogbG5hbWUsXG5cdCAgICAgICAgICAgICAgICAgXCJFbWFpbFwiOiBlbWFpbCxcblx0ICAgICAgICAgICAgICAgICBcIk1vYmlsZVBob25lXCI6IG1vYmlsZSxcblx0ICAgICAgICAgICAgICAgICBcIkxlYWRfVHlwZV9fY1wiOiBpYW1hLFxuXHQgICAgICAgICAgICAgICAgIFwiQ29tbWVuY2VtZW50X0RhdGVfX2NcIjogc3RhcnRTdHVkeSxcblx0ICAgICAgICAgICAgICAgICBcImludGVyZXN0c1wiOiBsaWtlVG9Lbm93LFxuXHQgICAgICAgICAgICAgICAgIFwiU3R1ZHlfQXJlYV9fY1wiOiBzdHVkeUFyZWEsXG5cdCAgICAgICAgICAgICAgICAgXCJMZXZlbF9vZl9TdHVkeV9fY1wiOiBzdHVkeUxldmVsLFxuXHQgICAgICAgICAgICAgICAgIFwiZGlzY2lwbGluZUFyZWFcIjogc3R1ZHlBcmVhLFxuXHQgICAgICAgICAgICAgICAgIFwiWWVhcl9MZXZlbF9fY1wiOiB5ZWFyTGV2ZWwsXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBteUZvcm0uc3VibWl0KCk7XG5cdCAgICAgICAgICAgIFxuXG5cblxuXG5cblxuXHQgICAgICAgICAgICBpZihyZWZyZXNoZXIgPT09IHRydWUpIHtcblx0XHQgICAgICAgICAgICAkKCdidXR0b25bbmFtZT11cGRhdGVdJykuaHRtbCgnPHNwYW4gc3R5bGU9XCJkaXNwbGF5Om5vbmVcIiBjbGFzcz1cImxvYWRlcnNtYWxsXCI+PC9zcGFuPlVwZGF0aW5nIGRldGFpbHMnKTtcblx0XHQgICAgICAgICAgICAkKCcubG9hZGVyc21hbGwnKS5jc3MoXCJkaXNwbGF5XCIsXCJpbmxpbmUtYmxvY2tcIik7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBpZihyZWZyZXNoZXIgPT09IHRydWUpIHtcblx0XHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0ICAgICAgICAgICAgXHQkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdFx0ICAgICAgICAgICAgXHQkKCcucmVnaXN0ZXItaW50ZXJlc3Qtb3ZlcmxheScpLmNzcygnZGlzcGxheTogbm9uZScpO1xuXHRcdCAgICAgICAgICAgIFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdub3Njcm9sbCcpLmRlbGF5KDUwMCkucXVldWUoZnVuY3Rpb24oKXtcblx0XHQgICAgICAgICAgICBcdFx0bG9jYXRpb24ucmVsb2FkKCk7XHRcblx0XHRcdFx0ICBcdFx0fSk7XG5cdFx0ICAgICAgICAgICAgfSwgMzAwMCk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgXHQkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdCAgICAgICAgICAgIFx0JCgnLnJlZ2lzdGVyLWludGVyZXN0LW92ZXJsYXknKS5jc3MoJ2Rpc3BsYXk6IG5vbmUnKTtcblx0ICAgICAgICAgICAgXHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25vc2Nyb2xsJyk7XG5cdFx0ICAgICAgICB9XG5cdCAgICAgICAgfSk7XG4gICAgXHR9XG4gIFx0fVxuXG4gIFx0Ly8gRm9ybSB2YWxpZGF0aW9uXG5cdCQoJ2Zvcm0jcmVnaXN0ZXJJbnRlcmVzdCcpLnZhbGlkYXRlKHtcblx0XHRydWxlczoge1xuXHRcdFx0Zk5hbWU6IHtcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdG1pbmxlbmd0aDogMlxuXHRcdFx0fSxcblx0XHRcdHJlZ0VtYWlsOiB7XG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRlbWFpbDogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHJlZ01vYmlsZToge1xuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0bnVtYmVyOiB0cnVlLFxuXHRcdFx0XHRtaW5sZW5ndGg6IDEwLFxuXHRcdFx0XHRtYXhsZW5ndGg6IDEwXG5cdFx0XHR9LFxuXHRcdFx0ZGVzY3JpYmVzWW91OiB7XG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlXG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdG1lc3NhZ2VzOiB7XG5cdFx0XHRmTmFtZTogXCJFbnN1cmUgeW91ciBmaXJzdCBuYW1lIGlzIGVudGVyZWQgY29ycmVjdGx5XCIsXG5cdFx0XHRyZWdFbWFpbDogXCJQbGVhc2UgZW5zdXJlIHlvdXIgZW1haWwgaXMgaW4gdGhlIGNvcnJlY3QgZm9ybWF0LiBlLmcuIG5hbWVAZW1haWwuY29tXCIsXG5cdFx0XHRyZWdNb2JpbGU6IHtcblx0XHRcdFx0cmVxdWlyZWQ6IFwiQ2hlY2sgeW91IG51bWJlciBmb3IgY29ycmVjdG5lc3NcIixcblx0XHRcdFx0bnVtYmVyOiAnUGhvbmUgbnVtYmVyIG11c3QgY29uc2lzdCBvZiBvbmx5IG51bWJlcnMnLFxuXHRcdFx0XHRtaW5sZW5ndGg6IFwiUGhvbmUgbnVtYmVyIG11c3QgYmUgMTAgZGlnaXRzIGxvbmdcIixcblx0XHRcdFx0bWF4bGVuZ3RoOiBcIlBob25lIG51bWJlciBtdXN0IGJlIDEwIGRpZ2l0cyBsb25nXCIsXG5cdFx0XHR9LFxuXHRcdFx0ZGVzY3JpYmVzWW91OiBcIllvdSBtdXN0IHNlbGVjdCB0aGUgb25lIHRoYXQgYmVzdCBkZXNjcmliZXMgeW91XCJcblx0XHR9LFxuXHRcdGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3JzIC0gJywgZXJyb3IpO1xuXHQgICAgICAgIGlmIChlbGVtZW50LmF0dHIoXCJuYW1lXCIpID09IFwiZGVzY3JpYmVzWW91XCIpIHtcblx0ICAgICAgICAgICAgJCggJy5zZWN0aW9uLWRlc2NyaWJlc1lvdSBsZWdlbmQnICkuYXBwZW5kKGVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJmTmFtZVwiKSB7XG5cdCAgICAgICAgXHRlcnJvci5pbnNlcnRBZnRlcihlbGVtZW50KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJyZWdFbWFpbFwiKSB7XG5cdCAgICAgICAgXHRlcnJvci5pbnNlcnRBZnRlcihlbGVtZW50KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJyZWdNb2JpbGVcIikge1xuXHQgICAgICAgIFx0ZXJyb3IuaW5zZXJ0QWZ0ZXIoZWxlbWVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBcdChlcnJvci5pbnNlcnRBZnRlciggZWxlbWVudCApKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0pO1xuXG5cdC8vIE9uIGNsaWNrIG9yIGJsdXIgb2YgaW5wdXQgY2hlY2sgd2hldGhlciBmb3JtIGlzIHZhbGlkXG5cdCQoJ2Zvcm0jcmVnaXN0ZXJJbnRlcmVzdCAuZm9ybS1zZWN0aW9uLW9uZSBpbnB1dCcpLm9uKCdibHVyIGNsaWNrJywgZnVuY3Rpb24oKXtcbiAgICBcdHZhciBlbXB0eUZpZWxkcyA9ICQoJy5pbnB1dENvbnRhaW5lci5yZXF1aXJlZCBpbnB1dCcpLmZpbHRlcihmdW5jdGlvbigpe1xuICAgIFx0XHRyZXR1cm4gJCh0aGlzKS52YWwoKSA9PT0gXCJcIjtcbiAgICBcdH0pLmxlbmd0aDtcbiAgICBcdHZhciBlcnJvck1zZ3MgPSAkKCdpbnB1dC5lcnJvcicpLmxlbmd0aDtcbiAgICBcdHZhciByYWRpb2NoZWNrID0gJCgnaW5wdXQ6cmFkaW9bbmFtZT1cImRlc2NyaWJlc1lvdVwiXTpjaGVja2VkJykubGVuZ3RoO1xuXG5cdFx0aWYoKGVtcHR5RmllbGRzID09PSAwKSAmJiAoZXJyb3JNc2dzID09PSAwKSAmJiByYWRpb2NoZWNrICE9IDApIHtcblx0XHRcdCQoJ2J1dHRvbltuYW1lPW5leHRGb3JtJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHR9XG4gICAgfSk7XHRcblxuXHQvLyBTdWJtaXQgZm9ybVxuICAgICQoJyNyZWdpc3RlckludGVyZXN0IGJ1dHRvblt0eXBlPXN1Ym1pdF0nKS5vbmUoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgXHRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgXHRyZWZyZXNoZXIgPSB0cnVlO1xuICAgIFx0c3VibWl0Rm9ybShlKTtcbiAgICB9KTtcblxuICBcdHZhciBvdmVybGF5ID0gJCgnLm92ZXJsYXknKSxcbiAgXHRcdGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgXHQvLyBPbiBjbGljayBvZiBHZXQgbW9yZSBpbmZvIENUQSwgb3BlbiB1cCByZWdpc3RlciBpbnRlcmVzIGZvcm0gaW4gbW9kYWxcbiAgXHQkKCcubmF2aWdhdGlvbl9fdXRpbGl0eS1saW5rX0dldF9tb3JlX2luZm8nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgXHRcdHZhclx0bXlGb3JtID0gJCgnZm9ybSNyZWdpc3RlckludGVyZXN0Jyk7XG4gIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHRvdmVybGF5LmFkZENsYXNzKCdzaG93Jyk7XG4gIFx0XHRib2R5LmFkZENsYXNzKCdub3Njcm9sbCcpO1xuICBcdFx0XG4gIFx0XHRtYWtlQWNjZXNzaWJsZSgpO1xuICBcdFxuICBcdH0pO1xuXG5cbiAgXHQvLyBBZGQgY2xhc3Mgb24gZm9jdXMgb2YgaW5wdXQgdG8gbW92ZSBsYWJlbCBvdXQgb2YgdGhlIHdheSBvZiBpbnB1dCBmaWVsZFxuXHQkKCdpbnB1dFt0eXBlPVwidGV4dFwiXSwgaW5wdXRbdHlwZT1cInRlbFwiXScpLmZvY3VzKGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cdFx0aWYodmFsLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdmaWxsZWQnKTtcblx0XHR9XG5cdH0pO1x0XG5cblx0Ly8gT24gRm9jdXNPdXQgb2YgaW5wdXQsIGlmIGlucHV0IGlzIGVtcHR5LCBwbGFjZSBsYWJlbCBiYWNrIGluIG9yaWdpbmFsIHN0YXRlXG5cdCQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdLCBpbnB1dFt0eXBlPVwidGVsXCJdJykuZm9jdXNvdXQoZnVuY3Rpb24oKXtcblx0XHR2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcblx0XHRpZih2YWwubGVuZ3RoID09IDApIHtcblx0XHRcdCQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2ZpbGxlZCcpO1xuXHRcdH1cblx0fSk7XG5cbiAgXHQvLyBTaG93IG1vcmUgb3B0aW9ucyBpbiByYWRpbyBidXR0b25zXG4gIFx0JCgnaW5wdXQ6cmFkaW9bbmFtZT1kZXNjcmliZXNZb3VdLCBpbnB1dDpyYWRpb1tuYW1lPXN0dWR5SW50ZXJlc3RdJykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICBcdFx0JCh0aGlzKS5jbG9zZXN0KCcuZmFrZURyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ29wZW4gZmlsbGVkJyk7XG4gIFx0XHQkKHRoaXMpLnBhcmVudCgpLmVxKDIpLmFkZENsYXNzKCdmaWxsZWQnKTtcbiAgXHR9KTtcblxuICBcdC8vIENsaWNraW5nIG9uIHRoZSBmYWtlIGRyb3Bkb3duXG4gIFx0JCgnLnNlY3Rpb24tZGVzY3JpYmVzWW91IC5yYWRpb0J1dHRvbjpub3QoLmZha2VEcm9wZG93biknKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0aWYoJCgnLmZha2VEcm9wZG93bicpLmhhc0NsYXNzKCdvcGVuJykpIHtcbiAgXHRcdFx0JCgnLmZha2VEcm9wZG93bicpLnJlbW92ZUNsYXNzKCdvcGVuIGZpbGxlZCcpO1xuICBcdFx0fVxuICBcdFx0JCgnLmFkZGVkLXRleHQnKS5yZW1vdmUoKTtcbiAgXHR9KTtcblxuICBcdC8vIGhhbmRsaW5nIHRoZSBzdWItcmFkaW8gYnV0dG9uc1xuICBcdCQoJy5zZWN0aW9uLWRlc2NyaWJlc1lvdSAuc3ViLXJhZGlvIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHQkKCcuYWRkZWQtdGV4dCcpLnJlbW92ZSgpO1xuICBcdFx0JCh0aGlzKS5jbG9zZXN0KCcuZmFrZURyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgXHR9KTtcblxuICBcdC8vIEFwcGVuZCBzZWxlY3Rpb24gdG8gb3JpZ2luYWwgcmFkaW9cbiAgXHQkKCdpbnB1dDpyYWRpb1tuYW1lPXNlY29uZGFyeS1zY2hvb2xdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHR2YXIgc2VsZWN0ZWRWYWx1ZSA9ICQodGhpcykudmFsKCk7XG4gIFx0XHR2YXIgc3NzPSAkKCcuc2Vjb25kYXJ5LXNjaG9vbC1zdHVkZW50Jyk7XG4gIFx0XG4gIFx0XHQkKCcuYWRkZWQtdGV4dCcpLmh0bWwoXCJcIik7XHRcdC8vIGNsZWFyIHZhbHVlXG4gIFx0XHRjb25zb2xlLmxvZygnc2VsZWN0ZWQgdmFsdWUgaXMgPSAnICsgc2VsZWN0ZWRWYWx1ZSk7XG4gIFx0XHRzc3MuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImFkZGVkLXRleHRcIj4nICsgc2VsZWN0ZWRWYWx1ZSArICc8L3NwYW4+Jyk7XG4gIFx0fSk7XG5cbiAgXHQkKCdpbnB1dDpyYWRpb1tuYW1lPXN1YmplY3RdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHR2YXIgc2VsZWN0ZWRWYWx1ZSA9ICQodGhpcykubmV4dCgnc3BhbicpLnRleHQoKTtcbiAgXHRcdHZhciB0ZXh0UmVwbGFjZUNvbnRhaW5lciA9ICQoJy5qcy10ZXh0UmVwbGFjZScpO1xuICBcdFx0dmFyIHRleHRSZXBsYWNlSHRtbCA9ICc8c3BhbiBjbGFzcz1cImpzLXRleHRSZXBsYWNlIG5vLXJhZGlvXCI+JyArIHNlbGVjdGVkVmFsdWUgKyAnPHN2ZyBjbGFzcz1cImljb24gaWNvbi1hcnJvdyBpY29uLWFycm93X19iYWNrZ3JvdW5kXCI+PHVzZSBocmVmPVwiI2ljb24tYXJyb3dcIiB4bGluazpocmVmPVwiI2ljb24tYXJyb3dcIi8+PC9zdmc+PC9zcGFuPic7XG4gIFx0XHRcbiAgXHRcdHRleHRSZXBsYWNlQ29udGFpbmVyLmh0bWwodGV4dFJlcGxhY2VIdG1sKTtcbiAgXHRcdCQodGhpcykuY2xvc2VzdCgnLmZha2VEcm9wZG93bicpLnJlbW92ZUNsYXNzKCdvcGVuIGZpbGxlZCcpO1xuICBcdH0pO1xuXG4gIFx0Ly8gSGFuZGxpbmcgY3VzdG9tIHJhZGlvIGJ1dHRvbiBzdHlsaW5nXG4gIFx0JCgnaW5wdXQ6cmFkaW8nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gIFx0XHRjb25zb2xlLmxvZygkKHRoaXMpLmF0dHIoJ25hbWUnKSk7XG4gIFx0XHQvLyBoYW5kbGUgc3ViLXJhZGlvIHN0YXR1cyBvbiBjaGFuZ2Ugb2Ygb3B0aW9uc1xuICBcdFx0dmFyIGRlc2NyaWJlc1lvdSA9ICQoJ2lucHV0I3NlY29uZGFyeS1zdHVkZW50JykuYXR0cignaWQnKSxcblx0XHRcdHdoaWNoUmFkaW8gPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG5cblx0XHRzd2l0Y2god2hpY2hSYWRpbykge1xuXHRcdFx0Y2FzZSAneTEyJzpcblx0XHRcdFx0dmFyIHdoaWNoUmFkaW9UeXBlID0gICdzZWNvbmRhcnktc3R1ZGVudCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneTExJzpcblx0XHRcdFx0dmFyIHdoaWNoUmFkaW9UeXBlID0gICdzZWNvbmRhcnktc3R1ZGVudCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneTEwJzpcblx0XHRcdFx0dmFyIHdoaWNoUmFkaW9UeXBlID0gICdzZWNvbmRhcnktc3R1ZGVudCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneTknOlxuXHRcdFx0XHR2YXIgd2hpY2hSYWRpb1R5cGUgPSAgJ3NlY29uZGFyeS1zdHVkZW50Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd5OCc6XG5cdFx0XHRcdHZhciB3aGljaFJhZGlvVHlwZSA9ICAnc2Vjb25kYXJ5LXN0dWRlbnQnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3k3Jzpcblx0XHRcdFx0dmFyIHdoaWNoUmFkaW9UeXBlID0gICdzZWNvbmRhcnktc3R1ZGVudCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZWFybHknOlxuXHRcdFx0XHR2YXIgd2hpY2hSYWRpb1R5cGUgPSAgJ3NlY29uZGFyeS1zdHVkZW50Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0aWYoKCQodGhpcykuYXR0cignbmFtZScpID09ICdzZWNvbmRhcnktc2Nob29sJykgfHwgKCQodGhpcykuYXR0cignaWQnKSA9PSAnc2Vjb25kYXJ5LXN0dWRlbnQnKSB8fCAoJCh0aGlzKS5hdHRyKCduYW1lJykgPT0gJ3N1YmplY3QnKSB8fCAoJCh0aGlzKS5hdHRyKCduYW1lJykgPT0gJ3N0dWR5SW50ZXJlc3QnKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJCh0aGlzKS5hdHRyKCduYW1lJykgKyAnIGNsaWNrZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnLnN1Yi1yYWRpbycpLmZpbmQoJy5vcHRpb25TZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdvcHRpb25TZWxlY3RlZCcpO1xuXHRcdFx0JCgnLnN1Yi1yYWRpbyBpbnB1dCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0fVxuXHQgIFx0XG5cblx0ICBcdGlmKCQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcblx0ICBcdFx0JCgnaW5wdXQ6cmFkaW86bm90KDpjaGVja2VkKScpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdvcHRpb25TZWxlY3RlZCcpO1xuXHQgIFx0XHQkKCdpbnB1dDpyYWRpbzpub3QoOmNoZWNrZWQpJykucGFyZW50KCkuZXEoMikucmVtb3ZlQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG5cdCAgXHRcdCQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG5cdCAgXHR9XG5cblx0ICBcdGlmKCQoJy5yYWRpb0J1dHRvbi5mYWtlRHJvcGRvd24gPiBkaXYgPiBpbnB1dFt0eXBlPXJhZGlvXScpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gIFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLnJhZGlvQnV0dG9uLmZha2VEcm9wZG93bicpLmFkZENsYXNzKCdvcHRpb25TZWxlY3RlZCcpO1xuICBcdFx0fSBlbHNlIHtcbiAgXHRcdFx0JCgnLnJhZGlvQnV0dG9uLmZha2VEcm9wZG93bicpLnJlbW92ZUNsYXNzKCdvcHRpb25TZWxlY3RlZCcpO1xuICBcdFx0fVxuXG4gIFx0fSk7XG4gIFx0XG4gIFx0JCgnaW5wdXQ6Y2hlY2tib3gnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0aWYoISQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdCQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgXHQvLyBPbiBjb21wbGV0aW9uIG9mIEZvcm0gUGFydCBvbmUgc2hvdyBQYXJ0IHR3b1xuICBcdCQoJ2J1dHRvbltuYW1lPW5leHRGb3JtXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIFx0XHQkKHRoaXMpLmZpbmQoJy5sb2FkZXJzbWFsbCcpLmNzcyhcImRpc3BsYXlcIixcImlubGluZS1ibG9ja1wiKS5zdG9wKCkuZGVsYXkoMzAwMCkucXVldWUoZnVuY3Rpb24oKXtcbiAgXHRcdFx0JCgnLmZvcm0tc2VjdGlvbi1vbmUnKS5hZGRDbGFzcygnZmFkZU91dCcpO1x0XG4gIFx0XHRcdCQoJy5mb3JtLXNlY3Rpb24tdHdvJykuYWRkQ2xhc3MoJ2ZhZGVJbicpO1xuICBcdFx0fSk7XG4gIFx0fSk7XG4gIFx0XG4gIFx0Ly8gQ2xvc2UgbW9kYWxcbiAgXHQkKCcubW9kYWxDbG9zZUJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIFx0XHRpZigoJCgnI3JlZ2lzdGVySW50ZXJlc3QnKSkudmFsaWQoKSl7XG4gIFx0XHRcdHJlZnJlc2hlciA9IGZhbHNlO1xuICBcdFx0XHRzdWJtaXRGb3JtKCk7XG4gIFx0XHRcdCQoJyNyZWdpc3RlckludGVyZXN0IGJ1dHRvbltuYW1lPXVwZGF0ZV0nKS5odG1sKCc8c3BhbiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiIGNsYXNzPVwibG9hZGVyc21hbGxcIj48L3NwYW4+VXBkYXRlIG15IGRldGFpbHMnKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGNsb3NlT3ZlcmxheSgpO1xuICBcdFx0XHQkKCdsYWJlbC5lcnJvcicpLnJlbW92ZSgpO1xuICBcdFx0fVxuICBcdH0pO1xuXG5cbiAgXHQgIFx0XG4gIH0pO1xuXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOyJdfQ==
