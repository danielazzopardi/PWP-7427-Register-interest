/*!
 * pwp7427
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2019. MIT licensed.
 */
!function(){function e(){t===!1&&(t=!0,Munchkin.init("209-INQ-367"))}var t=!1,n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//munchkin.marketo.net/munchkin.js",n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||e()},n.onload=e,document.getElementsByTagName("head")[0].appendChild(n)}(),function(e,t,n,o){"use strict";e(function(){function t(){e(".overlay").removeClass("show"),e("body").removeClass("noscroll")}function n(){if(e("#registerInterest").valid()){var t=e.trim(e("#registerInterest input[name=fName]").val()),n=e.trim(e("#registerInterest input[name=lName]").val()),o=e.trim(e("#registerInterest input[name=regEmail]").val().toLowerCase()),r=e.trim(e("#registerInterest input[name=regMobile]").val()),s=e("#registerInterest input[name='describesYou']:checked").val(),a=e("#registerInterest input[name='qualificationLevel']:checked").val(),i=e.trim(e("#registerInterest input[name=startDate]:checked").val()),l=e.trim(e("#registerInterest span.js-textReplace.no-radio").text()),d=e.trim(e("#registerInterest .secondary-school-student .added-text").text()),u=e("#registerInterest input[name=wantToKnow]:checked").map(function(){return this.value}).get().join("; ");MktoForms2.loadForm("//app-sn01.marketo.com","209-INQ-367",3171),MktoForms2.whenReady(function(m){console.log("myForm = "+m),console.log("Email address = "+o),console.log("First Name = "+t),console.log("Last Name = "+n),console.log("Mobile number = "+r),console.log("Lead Type = "+s),console.log("Commencement Data = "+i),console.log("Interest = "+u),console.log("study area = "+l),console.log("study Level = "+a),console.log("year Level = "+d),m.onSuccess(function(e){return console.log("Form successfully submitted"),console.log("Vals-",e),!1}),m.addHiddenFields({FirstName:t,LastName:n,Email:o,MobilePhone:r,Lead_Type__c:s,Commencement_Date__c:i,interests:u,Study_Area__c:l,Level_of_Study__c:a,disciplineArea:l,Year_Level__c:d}),m.submit(),c===!0&&(e("button[name=update]").html('<span style="display:none" class="loadersmall"></span>Updating details'),e(".loadersmall").css("display","inline-block")),c===!0?setTimeout(function(){e(".overlay").removeClass("show"),e(".register-interest-overlay").css("display: none"),e("body").removeClass("noscroll").delay(500).queue(function(){location.reload()})},3e3):(e(".overlay").removeClass("show"),e(".register-interest-overlay").css("display: none"),e("body").removeClass("noscroll"))})}}var o=e("meta[name=dkncoursetype]").attr("content"),r=e("meta[name=dknpagetitle]").attr("content"),s=e("meta[name=dkncourseaward]").attr("content"),a=e("span.course-name"),i=e("span.enquirer-name"),l=e(".js-next__form"),c=!0;e("form#registerInterest");if(""==!o){var d=o.search(/research/i),u=o.search(/undergraduate/i),m=o.search(/postgraduate/i),o="";u>-1?o="undergraduate":d>-1?o="research":m>-1&&(o="postgraduate")}else if(""==!r&&("Undergraduate courses"===r||"Postgraduate courses"===r||"Research degrees"===r)){var d=r.search(/research/i),u=r.search(/undergraduate/i),m=r.search(/postgraduate/i),o="";u>-1?o="undergraduate":d>-1?o="research":m>-1&&(o="postgraduate")}""==!s?a.text("the "+s+" course."):""==!r&&a.text(r),l.on("click",function(){var t=e.trim(e("#registerInterest input[name=firstName]").val());i.text(t+".")}),e("form#registerInterest").validate({rules:{fName:{required:!0,minlength:2},regEmail:{required:!0,email:!0},regMobile:{required:!0,number:!0,minlength:10,maxlength:10},describesYou:{required:!0}},messages:{fName:"Ensure your first name is entered correctly",regEmail:"Please ensure your email is in the correct format. e.g. name@email.com",regMobile:{required:"Check you number for correctness",number:"Phone number must consist of only numbers",minlength:"Phone number must be 10 digits long",maxlength:"Phone number must be 10 digits long"},describesYou:"You must select the one that best describes you"},errorPlacement:function(t,n){"describesYou"==n.attr("name")?e(".section-describesYou legend").append(t):"fName"==n.attr("name")?t.insertAfter(n):"regEmail"==n.attr("name")?t.insertAfter(n):"regMobile"==n.attr("name")?t.insertAfter(n):t.insertAfter(n)}}),e("form#registerInterest .form-section-one input").on("blur click",function(){var t=e(".inputContainer.required input").filter(function(){return""===e(this).val()}).length,n=e("input.error").length,o=e('input:radio[name="describesYou"]:checked').length;0===t&&0===n&&0!=o&&e("button[name=nextForm").removeAttr("disabled")}),e("#registerInterest button[type=submit]").one("click",function(e){e.preventDefault(),c=!0,n(e)});var p=e(".overlay"),h=e("body");e(".navigation__utility-link_Get_more_info").on("click",function(t){e("form#registerInterest");t.preventDefault(),p.addClass("show"),h.addClass("noscroll");e("form#registerInterest")}),e('input[type="text"], input[type="tel"]').focus(function(){var t=e(this).val();0==t.length&&e(this).parent().addClass("filled")}),e('input[type="text"], input[type="tel"]').focusout(function(){var t=e(this).val();0==t.length&&e(this).parent().removeClass("filled")}),e("input:radio[name=describesYou], input:radio[name=studyInterest]").on("click",function(){e(this).closest(".fakeDropdown").toggleClass("open filled"),e(this).parent().eq(2).addClass("filled")}),e(".section-describesYou .radioButton:not(.fakeDropdown)").on("click",function(){e(".fakeDropdown").hasClass("open")&&e(".fakeDropdown").removeClass("open filled"),e(".added-text").remove()}),e(".section-describesYou .sub-radio input").on("change",function(){e(".added-text").remove(),e(this).closest(".fakeDropdown").removeClass("open")}),e("input:radio[name=secondary-school]").on("change",function(){var t=e(this).val(),n=e(".secondary-school-student");e(".added-text").html(""),n.append('<span class="added-text">'+t+"</span>")}),e("input:radio[name=subject]").on("change",function(){var t=e(this).next("span").text(),n=e(".js-textReplace");n.text(t)}),e("input:radio").on("click",function(){e(this).is(":checked")&&(e("input:radio:not(:checked)").parent().removeClass("optionSelected"),e("input:radio:not(:checked)").parent().eq(2).removeClass("optionSelected"),e(this).parent().addClass("optionSelected"),e("input:radio:not(:checked)").closest("label").removeClass("optionSelected")),e(".radioButton.fakeDropdown > div > input[type=radio]").is(":checked")?e(".radioButton.fakeDropdown").addClass("optionSelected"):e(".radioButton.fakeDropdown").removeClass("optionSelected"),e(".sub-radio .radioButton input[type=radio]").is(":checked")&&(console.log("button pressed is "+e(this).closest("label")),e(".sub-radio .radioButton").removeClass("optionSelected"),e(".sub-radio input:radio:checked").parent().addClass("optionSelected"))}),e("input:checkbox").on("click",function(){e(this).is(":checked")?e(this).parent().addClass("optionSelected"):e(this).parent().removeClass("optionSelected")}),e("button[name=nextForm]").on("click",function(){e(this).find(".loadersmall").css("display","inline-block").stop().delay(3e3).queue(function(){e(".form-section-one").addClass("fadeOut"),e(".form-section-two").addClass("fadeIn")})}),e(".modalCloseButton").on("click",function(){e("#registerInterest").valid()?(c=!1,n(),e("#registerInterest button[name=update]").html('<span style="display:none" class="loadersmall"></span>Update my details')):(t(),e("label.error").remove())})})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiaW5pdE11bmNoa2luIiwiZGlkSW5pdCIsIk11bmNoa2luIiwiaW5pdCIsInMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJzcmMiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJ0aGlzIiwicmVhZHlTdGF0ZSIsIm9ubG9hZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCIkIiwid2luZG93IiwidW5kZWZpbmVkIiwiY2xvc2VPdmVybGF5IiwicmVtb3ZlQ2xhc3MiLCJzdWJtaXRGb3JtIiwidmFsaWQiLCJmbmFtZSIsInRyaW0iLCJ2YWwiLCJsbmFtZSIsImVtYWlsIiwidG9Mb3dlckNhc2UiLCJtb2JpbGUiLCJpYW1hIiwic3R1ZHlMZXZlbCIsInN0YXJ0U3R1ZHkiLCJzdHVkeUFyZWEiLCJ0ZXh0IiwieWVhckxldmVsIiwibGlrZVRvS25vdyIsIm1hcCIsInZhbHVlIiwiZ2V0Iiwiam9pbiIsIk1rdG9Gb3JtczIiLCJsb2FkRm9ybSIsIndoZW5SZWFkeSIsIm15Rm9ybSIsImNvbnNvbGUiLCJsb2ciLCJvblN1Y2Nlc3MiLCJ2YWxzIiwiYWRkSGlkZGVuRmllbGRzIiwiRmlyc3ROYW1lIiwiTGFzdE5hbWUiLCJFbWFpbCIsIk1vYmlsZVBob25lIiwiTGVhZF9UeXBlX19jIiwiQ29tbWVuY2VtZW50X0RhdGVfX2MiLCJpbnRlcmVzdHMiLCJTdHVkeV9BcmVhX19jIiwiTGV2ZWxfb2ZfU3R1ZHlfX2MiLCJkaXNjaXBsaW5lQXJlYSIsIlllYXJfTGV2ZWxfX2MiLCJzdWJtaXQiLCJyZWZyZXNoZXIiLCJodG1sIiwiY3NzIiwic2V0VGltZW91dCIsImRlbGF5IiwicXVldWUiLCJsb2NhdGlvbiIsInJlbG9hZCIsImNvdXJzZVR5cGUiLCJhdHRyIiwiY291cnNlTGFuZGluZ1BhZ2UiLCJjb3Vyc2VOYW1lIiwiY291cnNlTmFtZUNvbnRhaW5lciIsInBlcnNvbk5hbWVDb250YWluZXIiLCJzdWJzY3JpYmVCdXR0b24iLCJyZXNlYXJjaCIsInNlYXJjaCIsInVuZGVyZ3JhZCIsInBvc3RncmFkIiwib24iLCJ2YWxpZGF0ZSIsInJ1bGVzIiwiZk5hbWUiLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsInJlZ0VtYWlsIiwicmVnTW9iaWxlIiwibnVtYmVyIiwibWF4bGVuZ3RoIiwiZGVzY3JpYmVzWW91IiwibWVzc2FnZXMiLCJlcnJvclBsYWNlbWVudCIsImVycm9yIiwiZWxlbWVudCIsImFwcGVuZCIsImluc2VydEFmdGVyIiwiZW1wdHlGaWVsZHMiLCJmaWx0ZXIiLCJsZW5ndGgiLCJlcnJvck1zZ3MiLCJyYWRpb2NoZWNrIiwicmVtb3ZlQXR0ciIsIm9uZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm92ZXJsYXkiLCJib2R5IiwiYWRkQ2xhc3MiLCJmb2N1cyIsInBhcmVudCIsImZvY3Vzb3V0IiwiY2xvc2VzdCIsInRvZ2dsZUNsYXNzIiwiZXEiLCJoYXNDbGFzcyIsInJlbW92ZSIsInNlbGVjdGVkVmFsdWUiLCJzc3MiLCJuZXh0IiwidGV4dFJlcGxhY2VDb250YWluZXIiLCJpcyIsImZpbmQiLCJzdG9wIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQUNBLFdBRUEsUUFBQUEsS0FDQUMsS0FBQSxJQUNBQSxHQUFBLEVBQ0FDLFNBQUFDLEtBQUEsZ0JBSkEsR0FBQUYsSUFBQSxFQU9BRyxFQUFBQyxTQUFBQyxjQUFBLFNBQ0FGLEdBQUFHLEtBQUEsa0JBQ0FILEVBQUFJLE9BQUEsRUFDQUosRUFBQUssSUFBQSxxQ0FDQUwsRUFBQU0sbUJBQUEsV0FDQSxZQUFBQyxLQUFBQyxZQUFBLFVBQUFELEtBQUFDLFlBQ0FaLEtBR0FJLEVBQUFTLE9BQUFiLEVBQ0FLLFNBQUFTLHFCQUFBLFFBQUEsR0FBQUMsWUFBQVgsTUFJQSxTQUFBWSxFQUFBQyxFQUFBWixFQUFBYSxHQUVBLFlBRUFGLEdBQUEsV0FrRUEsUUFBQUcsS0FDQUgsRUFBQSxZQUFBSSxZQUFBLFFBQ0FK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dW5jaGtpbiBmb3IgTWFya2V0b1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgZGlkSW5pdCA9IGZhbHNlO1xuICBmdW5jdGlvbiBpbml0TXVuY2hraW4oKSB7XG4gICAgaWYoZGlkSW5pdCA9PT0gZmFsc2UpIHtcbiAgICAgIGRpZEluaXQgPSB0cnVlO1xuICAgICAgTXVuY2hraW4uaW5pdChcIjIwOS1JTlEtMzY3XCIpO1xuICAgIH1cbiAgfVxuICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBzLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICBzLmFzeW5jID0gdHJ1ZTtcbiAgcy5zcmMgPSBcIi8vbXVuY2hraW4ubWFya2V0by5uZXQvbXVuY2hraW4uanNcIjtcbiAgcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIiB8fCB0aGlzLnJlYWR5U3RhdGUgPT0gXCJsb2FkZWRcIikge1xuICAgICAgaW5pdE11bmNoa2luKCk7XG4gICAgfVxuICB9O1xuICBzLm9ubG9hZCA9IGluaXRNdW5jaGtpbjtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzKTtcbn0pKCk7XG5cblxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgJChmdW5jdGlvbiAoKSB7XG5cbiAgXHR2YXIgY291cnNlVHlwZSA9ICQoJ21ldGFbbmFtZT1ka25jb3Vyc2V0eXBlXScpLmF0dHIoXCJjb250ZW50XCIpLFxuICBcdCAgICBjb3Vyc2VMYW5kaW5nUGFnZSA9ICQoJ21ldGFbbmFtZT1ka25wYWdldGl0bGVdJykuYXR0cihcImNvbnRlbnRcIiksXG4gIFx0ICAgIGNvdXJzZU5hbWUgPSAkKCdtZXRhW25hbWU9ZGtuY291cnNlYXdhcmRdJykuYXR0cihcImNvbnRlbnRcIiksXG4gIFx0ICAgIGNvdXJzZU5hbWVDb250YWluZXIgPSAkKCdzcGFuLmNvdXJzZS1uYW1lJyksXG4gIFx0ICAgIHBlcnNvbk5hbWVDb250YWluZXIgPSAkKCdzcGFuLmVucXVpcmVyLW5hbWUnKSxcbiAgXHQgICAgc3Vic2NyaWJlQnV0dG9uID0gJCgnLmpzLW5leHRfX2Zvcm0nKSxcbiAgXHQgICAgcmVmcmVzaGVyID0gdHJ1ZSxcbiAgXHRcdG15Rm9ybSA9ICQoJ2Zvcm0jcmVnaXN0ZXJJbnRlcmVzdCcpLFxuICBcdFx0c3VibWl0Q291bnQgPSAwO1xuXG4gIFx0Ly8gY29uc29sZS5sb2coJ215Rm9ybSA9ICcgKyBteUZvcm0pO1x0XG5cbiAgXHQvLyB2YXIgY291cnNlVHlwZSA9IFwidW5kZXJncmFkdWF0ZVwiO1xuICBcdFx0XG4gIFx0XHRpZighY291cnNlVHlwZSA9PSBcIlwiKSB7XG4gIFx0XHQgICAgdmFyIHJlc2VhcmNoID0gY291cnNlVHlwZS5zZWFyY2goL3Jlc2VhcmNoL2kpLFxuICAgICAgXHRcdCAgICB1bmRlcmdyYWQgPSBjb3Vyc2VUeXBlLnNlYXJjaCgvdW5kZXJncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgcG9zdGdyYWQgPSBjb3Vyc2VUeXBlLnNlYXJjaCgvcG9zdGdyYWR1YXRlL2kpLFxuICAgICAgXHRcdCAgICBjb3Vyc2VUeXBlID0gXCJcIjtcbiAgICAgIFx0XHQgICAgXG4gICAgICBcdFx0ICAgIGlmKHVuZGVyZ3JhZCA+IC0xKSB7XG4gICAgICBcdFx0ICAgICAgICBjb3Vyc2VUeXBlID0gXCJ1bmRlcmdyYWR1YXRlXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH0gZWxzZSBpZiAocmVzZWFyY2ggPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwicmVzZWFyY2hcIjtcbiAgICAgIFx0XHQgICAgICAgIC8vIG15Rm9ybS5hZGRDbGFzcyhjb3Vyc2VUeXBlKTtcbiAgICAgIFx0XHQgICAgfSBlbHNlIGlmIChwb3N0Z3JhZCA+IC0xKSB7XG4gICAgICBcdFx0ICAgICAgICBjb3Vyc2VUeXBlID0gXCJwb3N0Z3JhZHVhdGVcIjtcbiAgICAgIFx0XHQgICAgICAgIC8vIG15Rm9ybS5hZGRDbGFzcyhjb3Vyc2VUeXBlKTtcbiAgICAgIFx0XHQgICAgfVxuICBcdFx0fSBlbHNlIGlmKCghY291cnNlTGFuZGluZ1BhZ2UgPT0gXCJcIikgJiYgKChjb3Vyc2VMYW5kaW5nUGFnZSA9PT0gXCJVbmRlcmdyYWR1YXRlIGNvdXJzZXNcIikgfHwgKGNvdXJzZUxhbmRpbmdQYWdlID09PSBcIlBvc3RncmFkdWF0ZSBjb3Vyc2VzXCIpIHx8IChjb3Vyc2VMYW5kaW5nUGFnZSA9PT0gXCJSZXNlYXJjaCBkZWdyZWVzXCIpKSkge1xuICBcdFx0ICAgIHZhciByZXNlYXJjaCA9IGNvdXJzZUxhbmRpbmdQYWdlLnNlYXJjaCgvcmVzZWFyY2gvaSksXG4gICAgICBcdFx0ICAgIHVuZGVyZ3JhZCA9IGNvdXJzZUxhbmRpbmdQYWdlLnNlYXJjaCgvdW5kZXJncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgcG9zdGdyYWQgPSBjb3Vyc2VMYW5kaW5nUGFnZS5zZWFyY2goL3Bvc3RncmFkdWF0ZS9pKSxcbiAgICAgIFx0XHQgICAgY291cnNlVHlwZSA9IFwiXCI7XG4gICAgICBcdFx0ICAgIFxuICAgICAgXHRcdCAgICBpZih1bmRlcmdyYWQgPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwidW5kZXJncmFkdWF0ZVwiO1xuICAgICAgXHRcdCAgICAgICAgLy8gbXlGb3JtLmFkZENsYXNzKGNvdXJzZVR5cGUpO1xuICAgICAgXHRcdCAgICB9IGVsc2UgaWYgKHJlc2VhcmNoID4gLTEpIHtcbiAgICAgIFx0XHQgICAgICAgIGNvdXJzZVR5cGUgPSBcInJlc2VhcmNoXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH0gZWxzZSBpZiAocG9zdGdyYWQgPiAtMSkge1xuICAgICAgXHRcdCAgICAgICAgY291cnNlVHlwZSA9IFwicG9zdGdyYWR1YXRlXCI7XG4gICAgICBcdFx0ICAgICAgICAvLyBteUZvcm0uYWRkQ2xhc3MoY291cnNlVHlwZSk7XG4gICAgICBcdFx0ICAgIH1cbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHQgICAgLy8gbXlGb3JtLmFkZENsYXNzKFwiZ2VuZXJpY1wiKTtcbiAgXHRcdH1cbiAgXHRcdFxuICBcdFx0Ly8gRmlsbGluZyBpbiBkeW5hbWljIHRleHQgZm9yIGNvdXJzZSBuYW1lXG4gIFx0XHRpZighY291cnNlTmFtZSA9PSBcIlwiKSB7XG4gIFx0XHQgICAgY291cnNlTmFtZUNvbnRhaW5lci50ZXh0KCd0aGUgJyArIGNvdXJzZU5hbWUgKyAnIGNvdXJzZS4nKTtcbiAgXHRcdH0gZWxzZSBpZighY291cnNlTGFuZGluZ1BhZ2UgPT0gXCJcIikge1xuICBcdFx0ICAgIGNvdXJzZU5hbWVDb250YWluZXIudGV4dChjb3Vyc2VMYW5kaW5nUGFnZSk7XG4gIFx0XHR9XG4gIFx0XHRcbiAgXHRcdC8vIEZpbGxpbmcgaW4gZHluYW1pYyB0ZXh0IGZvciBwZXJzb25zIG5hbWVcbiAgXHRcdHN1YnNjcmliZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0ICAgIHZhciBmbmFtZSA9ICQudHJpbSgkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT1maXJzdE5hbWVdXCIpLnZhbCgpKTtcbiAgXHRcdCAgICBwZXJzb25OYW1lQ29udGFpbmVyLnRleHQoZm5hbWUgKyAnLicpO1xuICBcdFx0ICAgIFxuICBcdFx0fSk7XG5cbiAgXHRmdW5jdGlvbiBjbG9zZU92ZXJsYXkoKSB7XG4gIFx0XHQkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdCAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25vc2Nyb2xsJyk7XG4gIFx0fVxuICBcdFxuICBcdGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7XG5cbiAgXHRcdC8vIGNvbnNvbGUubG9nKHJlZnJlc2hlcik7XG4gICAgXHRpZigoJCgnI3JlZ2lzdGVySW50ZXJlc3QnKSkudmFsaWQoKSl7XG4gICAgXHRcdHZhciBmbmFtZSA9ICQudHJpbSgkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT1mTmFtZV1cIikudmFsKCkpLFxuICAgIFx0XHRcdGxuYW1lID0gJC50cmltKCQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPWxOYW1lXVwiKS52YWwoKSksXG4gICAgXHRcdFx0ZW1haWwgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9cmVnRW1haWxdXCIpLnZhbCgpLnRvTG93ZXJDYXNlKCkpLFxuICAgIFx0XHRcdG1vYmlsZSA9ICQudHJpbSgkKFwiI3JlZ2lzdGVySW50ZXJlc3QgaW5wdXRbbmFtZT1yZWdNb2JpbGVdXCIpLnZhbCgpKSxcbiAgICBcdFx0XHRpYW1hID0gJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9J2Rlc2NyaWJlc1lvdSddOmNoZWNrZWRcIikudmFsKCksXG4gICAgXHRcdFx0c3R1ZHlMZXZlbCA9ICQoXCIjcmVnaXN0ZXJJbnRlcmVzdCBpbnB1dFtuYW1lPSdxdWFsaWZpY2F0aW9uTGV2ZWwnXTpjaGVja2VkXCIpLnZhbCgpLFxuICAgIFx0XHRcdHN0YXJ0U3R1ZHkgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9c3RhcnREYXRlXTpjaGVja2VkXCIpLnZhbCgpKSxcbiAgICBcdFx0XHRzdHVkeUFyZWEgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IHNwYW4uanMtdGV4dFJlcGxhY2Uubm8tcmFkaW9cIikudGV4dCgpKSxcbiAgICBcdFx0XHR5ZWFyTGV2ZWwgPSAkLnRyaW0oJChcIiNyZWdpc3RlckludGVyZXN0IC5zZWNvbmRhcnktc2Nob29sLXN0dWRlbnQgLmFkZGVkLXRleHRcIikudGV4dCgpKSxcbiAgICBcdFx0XHRsaWtlVG9Lbm93ID0gJChcIiNyZWdpc3RlckludGVyZXN0IGlucHV0W25hbWU9d2FudFRvS25vd106Y2hlY2tlZFwiKS5tYXAoZnVuY3Rpb24oKSB7XG4gICAgXHRcdFx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcbiAgICBcdFx0XHR9KS5nZXQoKS5qb2luKCc7ICcpO1xuXG4gICAgXHRcdE1rdG9Gb3JtczIubG9hZEZvcm0oXCIvL2FwcC1zbjAxLm1hcmtldG8uY29tXCIsIFwiMjA5LUlOUS0zNjdcIiwgMzE3MSk7XG5cdCAgICAgICAgTWt0b0Zvcm1zMi53aGVuUmVhZHkoZnVuY3Rpb24gKG15Rm9ybSkge1xuICAgICAgICBcdFx0Y29uc29sZS5sb2coJ215Rm9ybSA9ICcgKyBteUZvcm0pO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnRW1haWwgYWRkcmVzcyA9ICcgKyBlbWFpbCk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaXJzdCBOYW1lID0gJyArIGZuYW1lKTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ0xhc3QgTmFtZSA9ICcgKyBsbmFtZSk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2JpbGUgbnVtYmVyID0gJyArIG1vYmlsZSk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMZWFkIFR5cGUgPSAnICsgaWFtYSk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21tZW5jZW1lbnQgRGF0YSA9ICcgKyBzdGFydFN0dWR5KTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludGVyZXN0ID0gJyArIGxpa2VUb0tub3cpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnc3R1ZHkgYXJlYSA9ICcgKyBzdHVkeUFyZWEpO1xuXHQgICAgICAgICAgICBjb25zb2xlLmxvZygnc3R1ZHkgTGV2ZWwgPSAnICsgc3R1ZHlMZXZlbCk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCd5ZWFyIExldmVsID0gJyArIHllYXJMZXZlbCk7XG5cdCAgICAgICAgICAgICAgXG5cdCAgICAgICAgICAgICBteUZvcm0ub25TdWNjZXNzKGZ1bmN0aW9uICh2YWxzKSB7XHQgICAgICAgIFxuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Zvcm0gc3VjY2Vzc2Z1bGx5IHN1Ym1pdHRlZCcpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhbHMtJywgdmFscyk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIG15Rm9ybS5hZGRIaWRkZW5GaWVsZHMoe1xuXHQgICAgICAgICAgICAgICAgIFwiRmlyc3ROYW1lXCI6IGZuYW1lLFxuXHQgICAgICAgICAgICAgICAgIFwiTGFzdE5hbWVcIjogbG5hbWUsXG5cdCAgICAgICAgICAgICAgICAgXCJFbWFpbFwiOiBlbWFpbCxcblx0ICAgICAgICAgICAgICAgICBcIk1vYmlsZVBob25lXCI6IG1vYmlsZSxcblx0ICAgICAgICAgICAgICAgICBcIkxlYWRfVHlwZV9fY1wiOiBpYW1hLFxuXHQgICAgICAgICAgICAgICAgIFwiQ29tbWVuY2VtZW50X0RhdGVfX2NcIjogc3RhcnRTdHVkeSxcblx0ICAgICAgICAgICAgICAgICBcImludGVyZXN0c1wiOiBsaWtlVG9Lbm93LFxuXHQgICAgICAgICAgICAgICAgIFwiU3R1ZHlfQXJlYV9fY1wiOiBzdHVkeUFyZWEsXG5cdCAgICAgICAgICAgICAgICAgXCJMZXZlbF9vZl9TdHVkeV9fY1wiOiBzdHVkeUxldmVsLFxuXHQgICAgICAgICAgICAgICAgIFwiZGlzY2lwbGluZUFyZWFcIjogc3R1ZHlBcmVhLFxuXHQgICAgICAgICAgICAgICAgIFwiWWVhcl9MZXZlbF9fY1wiOiB5ZWFyTGV2ZWwsXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBteUZvcm0uc3VibWl0KCk7XG5cdCAgICAgICAgICAgIFxuXG5cblxuXG5cblxuXHQgICAgICAgICAgICBpZihyZWZyZXNoZXIgPT09IHRydWUpIHtcblx0XHQgICAgICAgICAgICAkKCdidXR0b25bbmFtZT11cGRhdGVdJykuaHRtbCgnPHNwYW4gc3R5bGU9XCJkaXNwbGF5Om5vbmVcIiBjbGFzcz1cImxvYWRlcnNtYWxsXCI+PC9zcGFuPlVwZGF0aW5nIGRldGFpbHMnKTtcblx0XHQgICAgICAgICAgICAkKCcubG9hZGVyc21hbGwnKS5jc3MoXCJkaXNwbGF5XCIsXCJpbmxpbmUtYmxvY2tcIik7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICBpZihyZWZyZXNoZXIgPT09IHRydWUpIHtcblx0XHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0ICAgICAgICAgICAgXHQkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdFx0ICAgICAgICAgICAgXHQkKCcucmVnaXN0ZXItaW50ZXJlc3Qtb3ZlcmxheScpLmNzcygnZGlzcGxheTogbm9uZScpO1xuXHRcdCAgICAgICAgICAgIFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdub3Njcm9sbCcpLmRlbGF5KDUwMCkucXVldWUoZnVuY3Rpb24oKXtcblx0XHQgICAgICAgICAgICBcdFx0bG9jYXRpb24ucmVsb2FkKCk7XHRcblx0XHRcdFx0ICBcdFx0fSk7XG5cdFx0ICAgICAgICAgICAgfSwgMzAwMCk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgXHQkKCcub3ZlcmxheScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdCAgICAgICAgICAgIFx0JCgnLnJlZ2lzdGVyLWludGVyZXN0LW92ZXJsYXknKS5jc3MoJ2Rpc3BsYXk6IG5vbmUnKTtcblx0ICAgICAgICAgICAgXHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25vc2Nyb2xsJyk7XG5cdFx0ICAgICAgICB9XG5cdCAgICAgICAgfSk7XG4gICAgXHR9XG4gIFx0fVxuXG4gIFx0Ly8gRm9ybSB2YWxpZGF0aW9uXG5cdCQoJ2Zvcm0jcmVnaXN0ZXJJbnRlcmVzdCcpLnZhbGlkYXRlKHtcblx0XHRydWxlczoge1xuXHRcdFx0Zk5hbWU6IHtcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdG1pbmxlbmd0aDogMlxuXHRcdFx0fSxcblx0XHRcdHJlZ0VtYWlsOiB7XG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRlbWFpbDogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHJlZ01vYmlsZToge1xuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0bnVtYmVyOiB0cnVlLFxuXHRcdFx0XHRtaW5sZW5ndGg6IDEwLFxuXHRcdFx0XHRtYXhsZW5ndGg6IDEwXG5cdFx0XHR9LFxuXHRcdFx0ZGVzY3JpYmVzWW91OiB7XG5cdFx0XHRcdHJlcXVpcmVkOiB0cnVlXG5cdFx0XHR9XG5cblx0XHR9LFxuXHRcdG1lc3NhZ2VzOiB7XG5cdFx0XHRmTmFtZTogXCJFbnN1cmUgeW91ciBmaXJzdCBuYW1lIGlzIGVudGVyZWQgY29ycmVjdGx5XCIsXG5cdFx0XHRyZWdFbWFpbDogXCJQbGVhc2UgZW5zdXJlIHlvdXIgZW1haWwgaXMgaW4gdGhlIGNvcnJlY3QgZm9ybWF0LiBlLmcuIG5hbWVAZW1haWwuY29tXCIsXG5cdFx0XHRyZWdNb2JpbGU6IHtcblx0XHRcdFx0cmVxdWlyZWQ6IFwiQ2hlY2sgeW91IG51bWJlciBmb3IgY29ycmVjdG5lc3NcIixcblx0XHRcdFx0bnVtYmVyOiAnUGhvbmUgbnVtYmVyIG11c3QgY29uc2lzdCBvZiBvbmx5IG51bWJlcnMnLFxuXHRcdFx0XHRtaW5sZW5ndGg6IFwiUGhvbmUgbnVtYmVyIG11c3QgYmUgMTAgZGlnaXRzIGxvbmdcIixcblx0XHRcdFx0bWF4bGVuZ3RoOiBcIlBob25lIG51bWJlciBtdXN0IGJlIDEwIGRpZ2l0cyBsb25nXCIsXG5cdFx0XHR9LFxuXHRcdFx0ZGVzY3JpYmVzWW91OiBcIllvdSBtdXN0IHNlbGVjdCB0aGUgb25lIHRoYXQgYmVzdCBkZXNjcmliZXMgeW91XCJcblx0XHR9LFxuXHRcdGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3JzIC0gJywgZXJyb3IpO1xuXHQgICAgICAgIGlmIChlbGVtZW50LmF0dHIoXCJuYW1lXCIpID09IFwiZGVzY3JpYmVzWW91XCIpIHtcblx0ICAgICAgICAgICAgJCggJy5zZWN0aW9uLWRlc2NyaWJlc1lvdSBsZWdlbmQnICkuYXBwZW5kKGVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJmTmFtZVwiKSB7XG5cdCAgICAgICAgXHRlcnJvci5pbnNlcnRBZnRlcihlbGVtZW50KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJyZWdFbWFpbFwiKSB7XG5cdCAgICAgICAgXHRlcnJvci5pbnNlcnRBZnRlcihlbGVtZW50KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJyZWdNb2JpbGVcIikge1xuXHQgICAgICAgIFx0ZXJyb3IuaW5zZXJ0QWZ0ZXIoZWxlbWVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBcdChlcnJvci5pbnNlcnRBZnRlciggZWxlbWVudCApKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0pO1xuXG5cdC8vIE9uIGNsaWNrIG9yIGJsdXIgb2YgaW5wdXQgY2hlY2sgd2hldGhlciBmb3JtIGlzIHZhbGlkXG5cdCQoJ2Zvcm0jcmVnaXN0ZXJJbnRlcmVzdCAuZm9ybS1zZWN0aW9uLW9uZSBpbnB1dCcpLm9uKCdibHVyIGNsaWNrJywgZnVuY3Rpb24oKXtcbiAgICBcdHZhciBlbXB0eUZpZWxkcyA9ICQoJy5pbnB1dENvbnRhaW5lci5yZXF1aXJlZCBpbnB1dCcpLmZpbHRlcihmdW5jdGlvbigpe1xuICAgIFx0XHRyZXR1cm4gJCh0aGlzKS52YWwoKSA9PT0gXCJcIjtcbiAgICBcdH0pLmxlbmd0aDtcbiAgICBcdHZhciBlcnJvck1zZ3MgPSAkKCdpbnB1dC5lcnJvcicpLmxlbmd0aDtcbiAgICBcdHZhciByYWRpb2NoZWNrID0gJCgnaW5wdXQ6cmFkaW9bbmFtZT1cImRlc2NyaWJlc1lvdVwiXTpjaGVja2VkJykubGVuZ3RoO1xuXG5cdFx0aWYoKGVtcHR5RmllbGRzID09PSAwKSAmJiAoZXJyb3JNc2dzID09PSAwKSAmJiByYWRpb2NoZWNrICE9IDApIHtcblx0XHRcdCQoJ2J1dHRvbltuYW1lPW5leHRGb3JtJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblx0XHR9XG4gICAgfSk7XHRcblxuXHQvLyBTdWJtaXQgZm9ybVxuICAgICQoJyNyZWdpc3RlckludGVyZXN0IGJ1dHRvblt0eXBlPXN1Ym1pdF0nKS5vbmUoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG4gICAgXHRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgXHRyZWZyZXNoZXIgPSB0cnVlO1xuICAgIFx0c3VibWl0Rm9ybShlKTtcbiAgICB9KTtcblxuICBcdHZhciBvdmVybGF5ID0gJCgnLm92ZXJsYXknKSxcbiAgXHRcdGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgXHQvLyBPbiBjbGljayBvZiBHZXQgbW9yZSBpbmZvIENUQSwgb3BlbiB1cCByZWdpc3RlciBpbnRlcmVzIGZvcm0gaW4gbW9kYWxcbiAgXHQkKCcubmF2aWdhdGlvbl9fdXRpbGl0eS1saW5rX0dldF9tb3JlX2luZm8nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgXHRcdHZhclx0bXlGb3JtID0gJCgnZm9ybSNyZWdpc3RlckludGVyZXN0Jyk7XG4gIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHRvdmVybGF5LmFkZENsYXNzKCdzaG93Jyk7XG4gIFx0XHRib2R5LmFkZENsYXNzKCdub3Njcm9sbCcpO1xuICBcdFx0XHRcblx0XHR2YXIgcmVnaXN0ZXJGb3JtID0gJCgnZm9ybSNyZWdpc3RlckludGVyZXN0Jyk7XG5cdFx0Ly8gY29uc29sZS5sb2coJ3RoaXMgaXMgaXQgLSAnICsgbXlGb3JtKTtcdFxuICBcdFxuICBcdH0pO1xuXG5cbiAgXHQvLyBBZGQgY2xhc3Mgb24gZm9jdXMgb2YgaW5wdXQgdG8gbW92ZSBsYWJlbCBvdXQgb2YgdGhlIHdheSBvZiBpbnB1dCBmaWVsZFxuXHQkKCdpbnB1dFt0eXBlPVwidGV4dFwiXSwgaW5wdXRbdHlwZT1cInRlbFwiXScpLmZvY3VzKGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cdFx0aWYodmFsLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdmaWxsZWQnKTtcblx0XHR9XG5cdH0pO1x0XG5cblx0Ly8gT24gRm9jdXNPdXQgb2YgaW5wdXQsIGlmIGlucHV0IGlzIGVtcHR5LCBwbGFjZSBsYWJlbCBiYWNrIGluIG9yaWdpbmFsIHN0YXRlXG5cdCQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdLCBpbnB1dFt0eXBlPVwidGVsXCJdJykuZm9jdXNvdXQoZnVuY3Rpb24oKXtcblx0XHR2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcblx0XHRpZih2YWwubGVuZ3RoID09IDApIHtcblx0XHRcdCQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2ZpbGxlZCcpO1xuXHRcdH1cblx0fSk7XG5cbiAgXHQvLyBTaG93IG1vcmUgb3B0aW9ucyBpbiByYWRpbyBidXR0b25zXG4gIFx0JCgnaW5wdXQ6cmFkaW9bbmFtZT1kZXNjcmliZXNZb3VdLCBpbnB1dDpyYWRpb1tuYW1lPXN0dWR5SW50ZXJlc3RdJykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICBcdFx0JCh0aGlzKS5jbG9zZXN0KCcuZmFrZURyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ29wZW4gZmlsbGVkJyk7XG4gIFx0XHQkKHRoaXMpLnBhcmVudCgpLmVxKDIpLmFkZENsYXNzKCdmaWxsZWQnKTtcbiAgXHR9KTtcblxuICBcdC8vIENsaWNraW5nIG9uIHRoZSBmYWtlIGRyb3Bkb3duXG4gIFx0JCgnLnNlY3Rpb24tZGVzY3JpYmVzWW91IC5yYWRpb0J1dHRvbjpub3QoLmZha2VEcm9wZG93biknKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0aWYoJCgnLmZha2VEcm9wZG93bicpLmhhc0NsYXNzKCdvcGVuJykpIHtcbiAgXHRcdFx0JCgnLmZha2VEcm9wZG93bicpLnJlbW92ZUNsYXNzKCdvcGVuIGZpbGxlZCcpO1xuICBcdFx0fVxuICBcdFx0JCgnLmFkZGVkLXRleHQnKS5yZW1vdmUoKTtcbiAgXHR9KTtcblxuICBcdC8vIGhhbmRsaW5nIHRoZSBzdWItcmFkaW8gYnV0dG9uc1xuICBcdCQoJy5zZWN0aW9uLWRlc2NyaWJlc1lvdSAuc3ViLXJhZGlvIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHQkKCcuYWRkZWQtdGV4dCcpLnJlbW92ZSgpO1xuICBcdFx0JCh0aGlzKS5jbG9zZXN0KCcuZmFrZURyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgXHR9KTtcblxuICBcdC8vIEFwcGVuZCBzZWxlY3Rpb24gdG8gb3JpZ2luYWwgcmFkaW9cbiAgXHQkKCdpbnB1dDpyYWRpb1tuYW1lPXNlY29uZGFyeS1zY2hvb2xdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHR2YXIgc2VsZWN0ZWRWYWx1ZSA9ICQodGhpcykudmFsKCk7XG4gIFx0XHR2YXIgc3NzPSAkKCcuc2Vjb25kYXJ5LXNjaG9vbC1zdHVkZW50Jyk7XG4gIFx0XG4gIFx0XHQkKCcuYWRkZWQtdGV4dCcpLmh0bWwoXCJcIik7XHRcdC8vIGNsZWFyIHZhbHVlXG4gIFx0XHRzc3MuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImFkZGVkLXRleHRcIj4nICsgc2VsZWN0ZWRWYWx1ZSArICc8L3NwYW4+Jyk7XG4gIFx0fSk7XG5cbiAgXHQkKCdpbnB1dDpyYWRpb1tuYW1lPXN1YmplY3RdJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gIFx0XHR2YXIgc2VsZWN0ZWRWYWx1ZSA9ICQodGhpcykubmV4dCgnc3BhbicpLnRleHQoKTtcbiAgXHRcdHZhciB0ZXh0UmVwbGFjZUNvbnRhaW5lciA9ICQoJy5qcy10ZXh0UmVwbGFjZScpO1xuXG4gIFx0XHR0ZXh0UmVwbGFjZUNvbnRhaW5lci50ZXh0KHNlbGVjdGVkVmFsdWUpO1xuICBcdH0pO1xuXG4gIFx0Ly8gSGFuZGxpbmcgY3VzdG9tIHJhZGlvIGJ1dHRvbiBzdHlsaW5nXG4gIFx0JCgnaW5wdXQ6cmFkaW8nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gIFx0XHQvLyBjb25zb2xlLmxvZygnaW5wdXQ6cmFkaW8gY2xpY2tlZCcpO1xuXHQgIFx0aWYoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuXHQgIFx0XHQkKCdpbnB1dDpyYWRpbzpub3QoOmNoZWNrZWQpJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG5cdCAgXHRcdCQoJ2lucHV0OnJhZGlvOm5vdCg6Y2hlY2tlZCknKS5wYXJlbnQoKS5lcSgyKS5yZW1vdmVDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcblx0ICBcdFx0JCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcblx0ICBcdFx0JCgnaW5wdXQ6cmFkaW86bm90KDpjaGVja2VkKScpLmNsb3Nlc3QoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG5cdCAgXHR9XG5cblx0ICBcdGlmKCQoJy5yYWRpb0J1dHRvbi5mYWtlRHJvcGRvd24gPiBkaXYgPiBpbnB1dFt0eXBlPXJhZGlvXScpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gIFx0XHRcdCQoJy5yYWRpb0J1dHRvbi5mYWtlRHJvcGRvd24nKS5hZGRDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdCQoJy5yYWRpb0J1dHRvbi5mYWtlRHJvcGRvd24nKS5yZW1vdmVDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcbiAgXHRcdH1cblxuICBcdFx0aWYoJCgnLnN1Yi1yYWRpbyAucmFkaW9CdXR0b24gaW5wdXRbdHlwZT1yYWRpb10nKS5pcygnOmNoZWNrZWQnKSkge1xuICBcdFx0XHQvLyB2YXIgYnRuY2hlY2tlZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgXHRcdFx0Ly8gdmFyIGJ0bmNoZWNrZWRwYXJlbnQgPSBidG5jaGVja2VkLnBhcmVudCgpO1xuXG4gIFx0XHRcdGNvbnNvbGUubG9nKCdidXR0b24gcHJlc3NlZCBpcyAnICsgJCh0aGlzKS5jbG9zZXN0KCdsYWJlbCcpKTtcbiAgXHRcdFx0Ly8gY29uc29sZS5sb2coJ2J1dHRvbiBwcmVzc2VkIHBhcmVudCBpcyAnICsgYnRuY2hlY2tlZHBhcmVudCk7XG4gIFx0XHRcdCQoJy5zdWItcmFkaW8gLnJhZGlvQnV0dG9uJykucmVtb3ZlQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG4gIFx0XHRcdCQoJy5zdWItcmFkaW8gaW5wdXQ6cmFkaW86Y2hlY2tlZCcpLnBhcmVudCgpLmFkZENsYXNzKCdvcHRpb25TZWxlY3RlZCcpO1xuICBcdFx0fVxuICBcdH0pO1xuICBcdFxuXG4gIFx0JCgnaW5wdXQ6Y2hlY2tib3gnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICBcdFx0aWYoISQodGhpcykuaXMoJzpjaGVja2VkJykpIHtcbiAgXHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnb3B0aW9uU2VsZWN0ZWQnKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdCQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ29wdGlvblNlbGVjdGVkJyk7XG4gIFx0XHR9XG4gIFx0fSk7XG5cbiAgXHQvLyBPbiBjb21wbGV0aW9uIG9mIEZvcm0gUGFydCBvbmUgc2hvdyBQYXJ0IHR3b1xuICBcdCQoJ2J1dHRvbltuYW1lPW5leHRGb3JtXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIFx0XHQkKHRoaXMpLmZpbmQoJy5sb2FkZXJzbWFsbCcpLmNzcyhcImRpc3BsYXlcIixcImlubGluZS1ibG9ja1wiKS5zdG9wKCkuZGVsYXkoMzAwMCkucXVldWUoZnVuY3Rpb24oKXtcbiAgXHRcdFx0JCgnLmZvcm0tc2VjdGlvbi1vbmUnKS5hZGRDbGFzcygnZmFkZU91dCcpO1x0XG4gIFx0XHRcdCQoJy5mb3JtLXNlY3Rpb24tdHdvJykuYWRkQ2xhc3MoJ2ZhZGVJbicpO1xuICBcdFx0fSk7XG4gIFx0fSk7XG4gIFx0XG4gIFx0Ly8gQ2xvc2UgbW9kYWxcbiAgXHQkKCcubW9kYWxDbG9zZUJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIFx0XHRpZigoJCgnI3JlZ2lzdGVySW50ZXJlc3QnKSkudmFsaWQoKSl7XG4gIFx0XHRcdHJlZnJlc2hlciA9IGZhbHNlO1xuICBcdFx0XHRzdWJtaXRGb3JtKCk7XG4gIFx0XHRcdCQoJyNyZWdpc3RlckludGVyZXN0IGJ1dHRvbltuYW1lPXVwZGF0ZV0nKS5odG1sKCc8c3BhbiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiIGNsYXNzPVwibG9hZGVyc21hbGxcIj48L3NwYW4+VXBkYXRlIG15IGRldGFpbHMnKTtcbiAgXHRcdH0gZWxzZSB7XG4gIFx0XHRcdGNsb3NlT3ZlcmxheSgpO1xuICBcdFx0XHQkKCdsYWJlbC5lcnJvcicpLnJlbW92ZSgpO1xuICBcdFx0fVxuICBcdH0pO1xuICBcdFxuICB9KTtcblxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTsiXX0=
